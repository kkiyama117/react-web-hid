!function(){var e={3099:function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},9670:function(e,t,n){var i=n(111);e.exports=function(e){if(!i(e))throw TypeError(String(e)+" is not an object");return e}},1318:function(e,t,n){var i=n(5656),s=n(7466),r=n(1400),o=function(e){return function(t,n,o){var c,a=i(t),l=s(a.length),d=r(o,l);if(e&&n!=n){for(;l>d;)if((c=a[d++])!=c)return!0}else for(;l>d;d++)if((e||d in a)&&a[d]===n)return e||d||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},4326:function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},9920:function(e,t,n){var i=n(6656),s=n(3887),r=n(1236),o=n(3070);e.exports=function(e,t){for(var n=s(t),c=o.f,a=r.f,l=0;l<n.length;l++){var d=n[l];i(e,d)||c(e,d,a(t,d))}}},8880:function(e,t,n){var i=n(9781),s=n(3070),r=n(9114);e.exports=i?function(e,t,n){return s.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},9114:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},9781:function(e,t,n){var i=n(7293);e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:function(e,t,n){var i=n(7854),s=n(111),r=i.document,o=s(r)&&s(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},6833:function(e,t,n){var i=n(8113);e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(i)},5268:function(e,t,n){var i=n(4326),s=n(7854);e.exports="process"==i(s.process)},8113:function(e,t,n){var i=n(5005);e.exports=i("navigator","userAgent")||""},748:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(e,t,n){var i=n(7854),s=n(1236).f,r=n(8880),o=n(1320),c=n(3505),a=n(9920),l=n(4705);e.exports=function(e,t){var n,d,u,h,f,_=e.target,p=e.global,m=e.stat;if(n=p?i:m?i[_]||c(_,{}):(i[_]||{}).prototype)for(d in t){if(h=t[d],u=e.noTargetGet?(f=s(n,d))&&f.value:n[d],!l(p?d:_+(m?".":"#")+d,e.forced)&&void 0!==u){if(typeof h==typeof u)continue;a(h,u)}(e.sham||u&&u.sham)&&r(h,"sham",!0),o(n,d,h,e)}}},7293:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},9974:function(e,t,n){var i=n(3099);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,s){return e.call(t,n,i,s)}}return function(){return e.apply(t,arguments)}}},5005:function(e,t,n){var i=n(857),s=n(7854),r=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?r(i[e])||r(s[e]):i[e]&&i[e][t]||s[e]&&s[e][t]}},7854:function(e,t,n){var i=function(e){return e&&e.Math==Math&&e};e.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},6656:function(e){var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},3501:function(e){e.exports={}},490:function(e,t,n){var i=n(5005);e.exports=i("document","documentElement")},4664:function(e,t,n){var i=n(9781),s=n(7293),r=n(317);e.exports=!i&&!s((function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}))},8361:function(e,t,n){var i=n(7293),s=n(4326),r="".split;e.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==s(e)?r.call(e,""):Object(e)}:Object},2788:function(e,t,n){var i=n(5465),s=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(e){return s.call(e)}),e.exports=i.inspectSource},9909:function(e,t,n){var i,s,r,o=n(8536),c=n(7854),a=n(111),l=n(8880),d=n(6656),u=n(5465),h=n(6200),f=n(3501),_=c.WeakMap;if(o){var p=u.state||(u.state=new _),m=p.get,v=p.has,y=p.set;i=function(e,t){return t.facade=e,y.call(p,e,t),t},s=function(e){return m.call(p,e)||{}},r=function(e){return v.call(p,e)}}else{var g=h("state");f[g]=!0,i=function(e,t){return t.facade=e,l(e,g,t),t},s=function(e){return d(e,g)?e[g]:{}},r=function(e){return d(e,g)}}e.exports={set:i,get:s,has:r,enforce:function(e){return r(e)?s(e):i(e,{})},getterFor:function(e){return function(t){var n;if(!a(t)||(n=s(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},4705:function(e,t,n){var i=n(7293),s=/#|\.prototype\./,r=function(e,t){var n=c[o(e)];return n==l||n!=a&&("function"==typeof t?i(t):!!t)},o=r.normalize=function(e){return String(e).replace(s,".").toLowerCase()},c=r.data={},a=r.NATIVE="N",l=r.POLYFILL="P";e.exports=r},111:function(e){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},1913:function(e){e.exports=!1},8536:function(e,t,n){var i=n(7854),s=n(2788),r=i.WeakMap;e.exports="function"==typeof r&&/native code/.test(s(r))},3070:function(e,t,n){var i=n(9781),s=n(4664),r=n(9670),o=n(7593),c=Object.defineProperty;t.f=i?c:function(e,t,n){if(r(e),t=o(t,!0),r(n),s)try{return c(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},1236:function(e,t,n){var i=n(9781),s=n(5296),r=n(9114),o=n(5656),c=n(7593),a=n(6656),l=n(4664),d=Object.getOwnPropertyDescriptor;t.f=i?d:function(e,t){if(e=o(e),t=c(t,!0),l)try{return d(e,t)}catch(e){}if(a(e,t))return r(!s.f.call(e,t),e[t])}},8006:function(e,t,n){var i=n(6324),s=n(748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,s)}},5181:function(e,t){t.f=Object.getOwnPropertySymbols},6324:function(e,t,n){var i=n(6656),s=n(5656),r=n(1318).indexOf,o=n(3501);e.exports=function(e,t){var n,c=s(e),a=0,l=[];for(n in c)!i(o,n)&&i(c,n)&&l.push(n);for(;t.length>a;)i(c,n=t[a++])&&(~r(l,n)||l.push(n));return l}},5296:function(e,t){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,s=i&&!n.call({1:2},1);t.f=s?function(e){var t=i(this,e);return!!t&&t.enumerable}:n},3887:function(e,t,n){var i=n(5005),s=n(8006),r=n(5181),o=n(9670);e.exports=i("Reflect","ownKeys")||function(e){var t=s.f(o(e)),n=r.f;return n?t.concat(n(e)):t}},857:function(e,t,n){var i=n(7854);e.exports=i},1320:function(e,t,n){var i=n(7854),s=n(8880),r=n(6656),o=n(3505),c=n(2788),a=n(9909),l=a.get,d=a.enforce,u=String(String).split("String");(e.exports=function(e,t,n,c){var a,l=!!c&&!!c.unsafe,h=!!c&&!!c.enumerable,f=!!c&&!!c.noTargetGet;"function"==typeof n&&("string"!=typeof t||r(n,"name")||s(n,"name",t),(a=d(n)).source||(a.source=u.join("string"==typeof t?t:""))),e!==i?(l?!f&&e[t]&&(h=!0):delete e[t],h?e[t]=n:s(e,t,n)):h?e[t]=n:o(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||c(this)}))},4488:function(e){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},3505:function(e,t,n){var i=n(7854),s=n(8880);e.exports=function(e,t){try{s(i,e,t)}catch(n){i[e]=t}return t}},6200:function(e,t,n){var i=n(2309),s=n(9711),r=i("keys");e.exports=function(e){return r[e]||(r[e]=s(e))}},5465:function(e,t,n){var i=n(7854),s=n(3505),r="__core-js_shared__",o=i[r]||s(r,{});e.exports=o},2309:function(e,t,n){var i=n(1913),s=n(5465);(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.8.1",mode:i?"pure":"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})},261:function(e,t,n){var i,s,r,o=n(7854),c=n(7293),a=n(9974),l=n(490),d=n(317),u=n(6833),h=n(5268),f=o.location,_=o.setImmediate,p=o.clearImmediate,m=o.process,v=o.MessageChannel,y=o.Dispatch,g=0,w={},b=function(e){if(w.hasOwnProperty(e)){var t=w[e];delete w[e],t()}},E=function(e){return function(){b(e)}},T=function(e){b(e.data)},I=function(e){o.postMessage(e+"",f.protocol+"//"+f.host)};_&&p||(_=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return w[++g]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},i(g),g},p=function(e){delete w[e]},h?i=function(e){m.nextTick(E(e))}:y&&y.now?i=function(e){y.now(E(e))}:v&&!u?(r=(s=new v).port2,s.port1.onmessage=T,i=a(r.postMessage,r,1)):o.addEventListener&&"function"==typeof postMessage&&!o.importScripts&&f&&"file:"!==f.protocol&&!c(I)?(i=I,o.addEventListener("message",T,!1)):i="onreadystatechange"in d("script")?function(e){l.appendChild(d("script")).onreadystatechange=function(){l.removeChild(this),b(e)}}:function(e){setTimeout(E(e),0)}),e.exports={set:_,clear:p}},1400:function(e,t,n){var i=n(9958),s=Math.max,r=Math.min;e.exports=function(e,t){var n=i(e);return n<0?s(n+t,0):r(n,t)}},5656:function(e,t,n){var i=n(8361),s=n(4488);e.exports=function(e){return i(s(e))}},9958:function(e){var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},7466:function(e,t,n){var i=n(9958),s=Math.min;e.exports=function(e){return e>0?s(i(e),9007199254740991):0}},7593:function(e,t,n){var i=n(111);e.exports=function(e,t){if(!i(e))return e;var n,s;if(t&&"function"==typeof(n=e.toString)&&!i(s=n.call(e)))return s;if("function"==typeof(n=e.valueOf)&&!i(s=n.call(e)))return s;if(!t&&"function"==typeof(n=e.toString)&&!i(s=n.call(e)))return s;throw TypeError("Can't convert object to primitive value")}},9711:function(e){var t=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+n).toString(36)}},4633:function(e,t,n){var i=n(2109),s=n(7854),r=n(261);i({global:!0,bind:!0,enumerable:!0,forced:!s.setImmediate||!s.clearImmediate},{setImmediate:r.set,clearImmediate:r.clear})}},t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";n(4633);const e={vendorId:10527,produciId:7},t={vendorId:10527,productId:5},i=e=>new Promise((t=>setTimeout(t,e)));class s{constructor(e,t){this._cmd=e,this._response=t}get cmd(){return this._cmd}get response(){return this._response}static getData(){let e=new Uint8Array(64);return e[0]=58,new s(e,!0)}static setRelay(e){let t=new Uint8Array(64);return t[0]=57,t[1]=e?1:0,new s(t,!1)}}class r{constructor({vendorId:e=0,productId:t=0}){if(!("hid"in navigator))throw new Error("WebHID is not supported.");this._vendorId=e,this._productId=t,this._sendTask=null,this._taskKill=!1,this._device=null,this._sendCmdList=[],this._sendCmd=null,this._cmdPhase=0,this._timeout_id=null,this._decoder=new TextDecoder,this._funcDisconnect=this.disconnect_.bind(this),this._funcInputreport=this.inputreport_.bind(this),this._process=!1,this._outputReportId=0,this._listeners={}}addEventListener(e,t){e in this._listeners||(this._listeners[e]=[]),this._listeners[e].push(t)}removeEventListener(e,t){if(!(e in this._listeners))return;let n=this._listeners[e];for(let e=0,i=n.length;e<i;e++)if(n[e]===t)return void n.splice(e,1)}dispatchEvent(e){if(!(e.type in this._listeners))return;let t=this._listeners[e.type].slice();for(let n=0,i=t.length;n<i;n++)t[n].call(this,e);return!e.defaultPrevented}async disconnect_(e){console.log("hid disconnect"),e.device===this._device&&(await this.close(),this.dispatchEvent(new CustomEvent("disconnect")))}async inputreport_(e){console.log(e.device.productName+": got input report "+e.reportId);let t=new Uint8Array(e.data.buffer);if(console.log(t),1===this._cmdPhase&&(this._cmdPhase=2),2===this._cmdPhase){if(null!=this._sendCmd.resolve){let e=this._sendCmd.resolve;this._sendCmd=null,e(t)}this._timeout_id&&clearTimeout(this._timeout_id),this._cmdPhase=0}}async open(){if(null==this._device&&!this._process){this._process=!0;let e=null;try{const e={vendorId:this.vendorId,vroductId:this.productId};this._taskKill=!1,navigator.hid.addEventListener("disconnect",this._funcDisconnect);let t=await navigator.hid.requestDevice({filters:[e]});if(!(null!=t&&t.length>0))throw new Error("Device is not found.");this._device=t[0],this._device.addEventListener("inputreport",this._funcInputreport),await this._device.open(),this._sendTask=this.sendTask_()}catch(t){console.log(t),e=t}finally{this._process=!1}if(e){try{this._device&&this._device.close()}catch(e){}throw e}}}async close(){if(this._device&&!this._process){this._process=!0;try{navigator.hid.removeEventListener("disconnect",this._funcDisconnect),this._taskKill=!0;try{await Promise.resolve(this._sendTask)}catch(e){}this._sendTask=null;try{this._device&&this._device.close()}catch(e){}for(;this._sendCmdList.length>0;){let e=this._sendCmdList.shift();e&&e.reject&&(0,e.reject)(new Error("hid port closed"))}this._device=null}catch(e){console.log(e)}finally{this._taskKill=!1,this._process=!1}}}get vendorId(){return this._vendorId}get productId(){return this._productId}async sendTimeout_(){if(null!=this._timeout_id&&(this._timeout_id=null,this._sendCmd&&this._sendCmd.reject)){this._cmdPhase=0;let e=this._sendCmd.reject;this._sendCmd=null,e(new Error("serial send timeout"))}}async sendTask_(){console.log("Enter sendTask");try{for(;;)if(0==this._cmdPhase&&this._sendCmdList.length>0){if(this._sendCmd=this._sendCmdList.shift(),this._sendCmd.response&&(this._cmdPhase=1,this._timeout_id&&clearTimeout(this._timeout_id),this._timeout_id=setTimeout(this.sendTimeout_.bind(this),1e3)),await this._device.sendReport(this._outputReportId,this._sendCmd.data),!this._sendCmd.response&&(this._cmdPhase=0,this._sendCmd&&this._sendCmd.resolve)){let e=this._sendCmd.resolve;this._sendCmd=null,e(null)}}else{if(this._taskKill)break;await i(100)}}catch(e){console.log(e)}if(this._sendCmd&&this._sendCmd.reject){let e=this._sendCmd.reject;this._sendCmd=null,e(new Error("serial port closed"))}console.log("Leave sendTask")}async sendData(e){let t={data:e.cmd,response:e.response,resolve:null,reject:null},n=this;return new Promise((function(e,i){t.resolve=e,t.reject=i,n._sendCmdList.push(t)}))}}class o{constructor(e,t){this._cmd=e,this._response=t}get cmd(){return this._cmd}get response(){return this._response}static getData(){return new o("DT ?\r",!0)}static setRelay(e){let t;return t=e?"RL 1\r":"RL 0\r",new o(t,!0)}}class c{constructor({vendorId:e=0,productId:t=0}){if(!("serial"in navigator))throw new Error("WebSerial is not supported.");this._vendorId=e,this._productId=t,this._recvTask=null,this._sendTask=null,this._taskKill=!1,this._device=null,this._sendCmdList=[],this._sendCmd=null,this._cmdPhase=0,this._timeout_id=null,this._serialReader=null,this._serialWriter=null,this._decoder=new TextDecoder,this._encoder=new TextEncoder,this._funcDisconnect=this.disconnect_.bind(this),this._process=!1,this._listeners={}}addEventListener(e,t){e in this._listeners||(this._listeners[e]=[]),this._listeners[e].push(t)}removeEventListener(e,t){if(!(e in this._listeners))return;let n=this._listeners[e];for(let e=0,i=n.length;e<i;e++)if(n[e]===t)return void n.splice(e,1)}dispatchEvent(e){if(!(e.type in this._listeners))return;let t=this._listeners[e.type].slice();for(let n=0,i=t.length;n<i;n++)t[n].call(this,e);return!e.defaultPrevented}async disconnect_(e){console.log("serial disconnect"),e.port===this._device&&(await this.close(),this.dispatchEvent(new CustomEvent("disconnect")))}async open(){if(null==this._device&&!this._process){this._process=!0,this._taskKill=!1;try{const e={usbVendorId:this.vendorId,usbProductId:this.productId},t={baudRate:115200};navigator.serial.addEventListener("disconnect",this._funcDisconnect),this._device=await navigator.serial.requestPort({filters:[e]}),await this._device.open(t),this._serialReader=this._device.readable.getReader(),this._serialWriter=this._device.writable.getWriter(),this._recvTask=this.recvTask_(),this._sendTask=this.sendTask_()}catch(e){throw console.log(e),e}finally{this._process=!1}}}async close(){if(this._device&&!this._process){this._process=!0;try{navigator.serial.removeEventListener("disconnect",this._funcDisconnect),this._taskKill=!0;try{this._serialReader&&await this._serialReader.cancel()}catch(e){}try{this._serialWriter&&await this._serialWriter.cancel()}catch(e){}try{await this._serialWriter.close()}catch(e){}this._serialWriter=null;try{await this._serialReader.releaseLock()}catch(e){}this._serialReader=null;try{await Promise.resolve(this._recvTask)}catch(e){}try{await Promise.resolve(this._sendTask)}catch(e){}this._recvTask=null,this._sendTask=null;try{this._device&&this._device.close()}catch(e){}for(;this._sendCmdList.length>0;){let e=this._sendCmdList.shift();e&&e.reject&&(0,e.reject)(new Error("serial port closed"))}this._device=null}catch(e){console.log(e)}finally{this._taskKill=!1,this._process=!1}}}get vendorId(){return this._vendorId}get productId(){return this._productId}async recvTask_(){console.log("Enter recvTask");let e=[];try{for(;;){const{value:t,done:n}=await this._serialReader.read();if(n)break;if(t.length>0&&1==this._cmdPhase&&(this._cmdPhase=2,e=[]),2==this._cmdPhase)for(let n=0;n<t.length;n++){let i=t[n];if(i>=32)e.push(i);else if(13==i){if(null!=this._sendCmd.resolve){let t=this._sendCmd.resolve,n=this._decoder.decode(new Uint8Array(e));this._sendCmd=null,t(n)}this._timeout_id&&clearTimeout(this._timeout_id),this._cmdPhase=0,e=[]}}else e=[]}}catch(e){console.log(e)}if(this._sendCmd&&this._sendCmd.reject){let e=this._sendCmd.reject;_sendCmd=null,e(new Error("serial port closed"))}console.log("Leave recvTask")}async sendTimeout_(){if(null!=this._timeout_id&&(this._timeout_id=null,this._sendCmd&&this._sendCmd.reject)){this._cmdPhase=0;let e=this._sendCmd.reject;this._sendCmd=null,e(new Error("serial send timeout"))}}async sendTask_(){console.log("Enter sendTask");try{for(;;)if(0==this._cmdPhase&&this._sendCmdList.length>0){if(this._sendCmd=this._sendCmdList.shift(),this._sendCmd.response&&(this._cmdPhase=1,this._timeout_id&&clearTimeout(this._timeout_id),this._timeout_id=setTimeout(this.sendTimeout_.bind(this),1e3)),await this._serialWriter.write(this._sendCmd.data),!this._sendCmd.response&&(this._cmdPhase=0,this._sendCmd&&this._sendCmd.resolve)){let e=this._sendCmd.resolve;this._sendCmd=null,e(null)}}else{if(this._taskKill)break;await i(100)}}catch(e){console.log(e)}if(this._sendCmd&&this._sendCmd.reject){let e=this._sendCmd.reject;_sendCmd=null,e(new Error("serial port closed"))}console.log("Leave sendTask")}async sendData(e){let t={data:this._encoder.encode(e.cmd),response:e.response,resolve:null,reject:null},n=this;return new Promise((function(e,i){t.resolve=e,t.reject=i,n._sendCmdList.push(t)}))}}window.addEventListener("load",(function(n){let i=null,a=null,l=null,d=null,u=null,h=!1;if("hid"in navigator){async function f(e){console.log("hid disconnect"),setImmediate((async function e(){if(i)if(h)setTimeout(e,100);else{h=!0;try{i.removeEventListener("disconnect",f),await i.close(),i=null}finally{h=!1}}b()}))}{let t=document.getElementById("hid_open");t&&t.addEventListener("click",(async function(t){if(null==i&&!h){h=!0;try{i=new r(e),i.addEventListener("disconnect",f),await i.open()}catch(e){console.log(e),i&&(await i.close(),i=null)}finally{h=!1}}b()}))}{let e=document.getElementById("hid_read");e&&e.addEventListener("click",(async function(e){if(i&&!h){h=!0;try{let e=await i.sendData(s.getData());console.log(e.toString());let t=new DataView(e.buffer);l=t.getInt16(5,!0)/10,d=Math.round(t.getInt16(7,!0)/1024*100);let n=t.getUint8(9);u=n?"â":"Ã",a=e.toString()}catch(e){console.log(e)}finally{h=!1}}b()}))}{let e=document.getElementById("hid_on");e&&e.addEventListener("click",(async function(e){if(i&&!h){h=!0;try{let e=await i.sendData(s.setRelay(!0));console.log(e)}finally{h=!1}}b()}))}{let e=document.getElementById("hid_off");e&&e.addEventListener("click",(async function(e){if(i&&!h){h=!0;try{let e=await i.sendData(s.setRelay(!1));console.log(e)}finally{h=!1}}b()}))}{let e=document.getElementById("hid_close");e&&e.addEventListener("click",(async function(e){if(i&&!h){h=!0;try{i.removeEventListener("disconnect",f),await i.close(),i=null}finally{h=!1}}b()}))}}let _=null,p=null,m=null,v=null,y=null,g=!1;if("serial"in navigator){async function w(e){console.log("serial Disconnect"),setImmediate((async function e(){if(_)if(g)setTimeout(e,100);else{g=!0;try{_.removeEventListener("disconnect",w),await _.close(),_=null}finally{g=!1}}b()}))}{let e=document.getElementById("serial_open");e&&e.addEventListener("click",(async function(e){if(null==_&&!g){g=!0;try{_=new c(t),_.addEventListener("disconnect",w),await _.open()}catch(e){_&&await _.close(),_=null}finally{g=!1}}b()}))}{let e=document.getElementById("serial_read");e&&e.addEventListener("click",(async function(e){if(_&&!g){g=!0;try{let e=await _.sendData(o.getData());if(console.log(e),p=e,e.length>=4){let t=e.substring(3).split(" ");if(t.length>=7){m=Number(t[4]),v=Math.round(Number(t[5])/1024*100);let e=Number(t[6]);y=e?"â":"Ã"}}}finally{g=!1}}b()}))}{let e=document.getElementById("serial_on");e&&e.addEventListener("click",(async function(e){if(_&&!g){g=!0;try{let e=await _.sendData(o.setRelay(!0));console.log(e)}finally{g=!1}}b()}))}{let e=document.getElementById("serial_off");e&&e.addEventListener("click",(async function(e){if(_&&!g){g=!0;try{let e=await _.sendData(o.setRelay(!1));console.log(e)}finally{g=!1}}b()}))}{let e=document.getElementById("serial_close");e&&e.addEventListener("click",(async function(e){if(_&&!g){g=!0;try{_.removeEventListener("disconnect",w),await _.close(),_=null}finally{g=!1}}b()}))}}function b(){{let e=document.getElementById("serial_open"),t=document.getElementById("serial_close"),n=document.getElementById("serial_read"),i=document.getElementById("serial_on"),s=document.getElementById("serial_off"),r=document.getElementById("serial_data_temp"),o=document.getElementById("serial_data_light"),c=document.getElementById("serial_data_ir"),a=document.getElementById("serial_data");"serial"in navigator?_?(e.disabled=!0,t.disabled=!1,n.disabled=!1,i.disabled=!1,s.disabled=!1,a.innerHTML=p,r.innerHTML=m,o.innerHTML=v,c.innerHTML=y):(e.disabled=!1,t.disabled=!0,n.disabled=!0,i.disabled=!0,s.disabled=!0,a.innerHTML="",r.innerHTML="",o.innerHTML="",c.innerHTML=""):(e.disabled=!0,t.disabled=!0,n.disabled=!0,i.disabled=!0,s.disabled=!0,a.innerHTML="",r.innerHTML="",o.innerHTML="",c.innerHTML="")}{let e=document.getElementById("hid_open"),t=document.getElementById("hid_close"),n=document.getElementById("hid_read"),s=document.getElementById("hid_on"),r=document.getElementById("hid_off"),o=document.getElementById("hid_data_temp"),c=document.getElementById("hid_data_light"),h=document.getElementById("hid_data_ir"),f=document.getElementById("hid_data");"hid"in navigator?i?(e.disabled=!0,t.disabled=!1,n.disabled=!1,s.disabled=!1,r.disabled=!1,f.innerHTML=a,o.innerHTML=l,c.innerHTML=d,h.innerHTML=u):(e.disabled=!1,t.disabled=!0,n.disabled=!0,s.disabled=!0,r.disabled=!0,f.innerHTML="",o.innerHTML="",c.innerHTML="",h.innerHTML=""):(e.disabled=!0,t.disabled=!0,n.disabled=!0,s.disabled=!0,r.disabled=!0,f.innerHTML="",o.innerHTML="",c.innerHTML="",h.innerHTML="")}}b()}))}()}();